import{_ as y,m as v,a as n,o as i,b as e,C as w,t as r,F as u,e as m,f as h,j as _}from"./app-xZFo10Vc.js";const x={name:"detailsAgentsIA",props:{agent:{type:Object,required:!0},isOwner:{type:Boolean,default:!1},sources:{type:Array,default:()=>[]},addSourceUrl:{type:String,default:""}},data(){return{responsibilities:[{title:"Optimisation des campagnes publicitaires",tasks:["Analyser les performances des publicités.","Proposer des recommandations pour améliorer le ROI.","Ajuster automatiquement les budgets et audiences."]},{title:"Génération et qualification de leads",tasks:["Identifier les prospects qualifiés via les interactions.","Automatiser l’envoi de messages personnalisés.","Intégrer les leads qualifiés dans le CRM."]}],messages:[{text:"Bonjour ! Comment puis-je vous aider aujourd’hui ?",sender:"bot",time:"10:00"}],newMessage:"",isTyping:!1,selectedFiles:[]}},computed:{safeTags(){var s;return Array.isArray((s=this.agent)==null?void 0:s.tags)?this.agent.tags:[]},sourcesToShow(){return Array.isArray(this.sources)?this.sources:[]}},methods:{handleFileUpload(s,t){const a=s.target.files;a!=null&&a.length&&(Array.from(a).forEach(l=>{if(t==="photo"&&l.type.startsWith("image/")){const d=new FileReader;d.onload=c=>{this.selectedFiles.push({file:l,name:l.name,type:"image",preview:c.target.result})},d.readAsDataURL(l)}else t==="doc"&&["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(l.type)&&this.selectedFiles.push({file:l,name:l.name,type:"document"})}),s.target.value="")},removeFile(s){this.selectedFiles.splice(s,1)},sendMessage(){!this.newMessage.trim()&&this.selectedFiles.length===0||(this.messages.push({text:this.newMessage,sender:"user",time:this.getCurrentTime(),files:[...this.selectedFiles]}),this.isTyping=!0,setTimeout(()=>{this.messages.push({text:"Fonctionnalité bientôt disponible !",sender:"bot",time:this.getCurrentTime()}),this.isTyping=!1},800),this.newMessage="",this.selectedFiles=[],this.$nextTick(this.scrollToBottom))},getCurrentTime(){const s=new Date;return`${String(s.getHours()).padStart(2,"0")}:${String(s.getMinutes()).padStart(2,"0")}`},scrollToBottom(){const s=this.$refs.chatContainer;s&&(s.scrollTop=s.scrollHeight)},formatDate(s){if(!s)return"—";const t=new Date(s);if(isNaN(t))return s;const a=String(t.getDate()).padStart(2,"0"),l=String(t.getMonth()+1).padStart(2,"0"),d=t.getFullYear();return`${a}/${l}/${d}`}},mounted(){this.scrollToBottom()}},k={class:"row"},T={class:"col-12 mb-5"},A={class:"card card-1 cardDetailsAgent"},S={class:"card-body d-flex gap-4 align-items-start"},F={key:1,src:"/assets/img/dash/robot_smile_2.png",alt:"",style:{width:"220px",height:"220px","object-fit":"contain"}},j={class:"flex-1"},C={class:"title d-flex justify-content-between align-items-start"},B={class:"mb-2"},D={class:"d-flex align-items-center gap-2"},M={key:1,class:"btn btn-primary fs-sm"},N={class:"d-flex align-items-center gap-2"},O={class:"mb-0",style:{color:"#FF8B33"}},q={class:"mb-3"},I={class:"tags d-flex flex-wrap gap-2"},R={class:"col-12 mb-5"},U={class:"card card-1 cardTimeline"},E={class:"card-header d-flex align-items-center"},V=["href"],z={class:"card-body"},L={class:"timeline mb-0"},H={class:"timeline-event p-3"},G={class:"timeline-header mb-3"},P={class:"mb-0"},W={class:"content"},Y={key:0,class:"btn btn-primary fs-sm"},J={class:"col-12 mb-5"},K={class:"card card-1 cardSources"},Q={class:"card-header d-flex justify-content-between align-items-center"},X=["href"],Z={class:"card-body pt-3"},$={class:"sources-cell col-type","data-label":"Type de source"},ee={class:"type-badge"},te={class:"sources-cell col-name truncate","data-label":"Nom/chemin"},se=["href"],ae={class:"sources-cell col-date","data-label":"Date d’ajout"},ie={class:"sources-cell col-size","data-label":"Taille"},ne={key:0,class:"text-center text-muted py-3"};function oe(s,t,a,l,d,c){const p=v("model-viewer");return i(),n("div",k,[e("div",T,[e("div",A,[e("div",S,[a.agent.avatar&&a.agent.avatar.glb_url?(i(),w(p,{key:0,src:a.agent.avatar.glb_url,bounds:"tight","camera-target":"0m 1.60m 0m","camera-orbit":"0deg 90deg 0.9m","field-of-view":"15deg","interaction-prompt":"none",style:{width:"180px",height:"190px",background:"transparent"},"shadow-intensity":"0.6"},null,8,["src"])):(i(),n("img",F)),e("div",j,[e("div",C,[e("h5",B,r(a.agent.greeting),1),e("div",D,[a.isOwner?(i(),n(u,{key:0},[t[0]||(t[0]=e("button",{class:"btn btn-primary fs-sm"},"Voir les outils",-1)),t[1]||(t[1]=e("button",{class:"btn btn-primary fs-sm",style:{"background-color":"#E65C00"}},"Modifier",-1))],64)):(i(),n("button",M,"Acheter"))])]),e("div",N,[t[2]||(t[2]=e("img",{src:"/asset/img/icon groupe.png",alt:""},null,-1)),e("h6",O,"Agent IA "+r(a.agent.type),1)]),t[3]||(t[3]=e("br",null,null,-1)),e("p",q,r(a.agent.description),1),e("div",I,[(i(!0),n(u,null,m(c.safeTags,o=>(i(),n("span",{key:o},"#"+r(o),1))),128))])])])])]),e("div",R,[e("div",U,[e("div",E,[t[4]||(t[4]=e("h5",{class:"mb-0"},"Responsabilités",-1)),e("a",{href:`/chat/${a.agent.id}`,class:"btn btn-primary fs-sm ms-auto"}," Commencez un chat ",8,V)]),e("div",z,[e("ul",L,[(i(!0),n(u,null,m(d.responsibilities,(o,g)=>(i(),n("li",{key:g,class:"timeline-item timeline-item-transparent"},[t[6]||(t[6]=e("span",{class:"timeline-point timeline-point-primary"},null,-1)),e("div",H,[e("div",G,[e("h6",P,r(o.title),1)]),e("div",W,[e("ul",null,[(i(!0),n(u,null,m(o.tasks,(b,f)=>(i(),n("li",{key:f},[t[5]||(t[5]=e("img",{src:"/assets/img/dash/fleche.png",alt:""},null,-1)),_(" "+r(b),1)]))),128))]),a.isOwner?(i(),n("button",Y,"Entraîner davantage")):h("",!0)])])]))),128))])])])]),e("div",J,[e("div",K,[e("div",Q,[t[7]||(t[7]=e("h5",{class:"mb-0"},[e("b",null,"Liste des sources ajoutées")],-1)),a.isOwner&&a.addSourceUrl?(i(),n("a",{key:0,href:a.addSourceUrl,class:"btn btn-primary fs-sm"},"Ajouter une source",8,X)):h("",!0)]),e("div",Z,[t[8]||(t[8]=e("div",{class:"sources-head d-none d-md-grid"},[e("div",null,"Type de source"),e("div",null,"Nom/chemin"),e("div",null,"Date d’ajout"),e("div",null,"Taille")],-1)),(i(!0),n(u,null,m(c.sourcesToShow,(o,g)=>(i(),n("div",{key:g,class:"source-card"},[e("div",$,[e("span",ee,r(o.type),1)]),e("div",te,[o.url||o.download_url?(i(),n("a",{key:0,href:o.url||o.download_url,target:"_blank",rel:"noopener"},r(o.name),9,se)):(i(),n(u,{key:1},[_(r(o.name),1)],64))]),e("div",ae,r(c.formatDate(o.added_at)),1),e("div",ie,r(o.size||"—"),1)]))),128)),c.sourcesToShow.length===0?(i(),n("div",ne," Aucune source pour le moment. ")):h("",!0)])])])])}const le=y(x,[["render",oe]]);export{le as default};
