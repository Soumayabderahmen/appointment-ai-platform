import{_ as X,r as y,k as tt,I as et,c as h,a as d,o as l,b as e,C as at,t as i,w as F,v as st,d as nt,F as k,e as M,f as R,g as ot,n as A,j as f,i as it,L as lt}from"./app-xZFo10Vc.js";import{t as dt}from"./tippy.esm-UnhF8rVw.js";/* empty css              */const rt={class:"calendar-container"},ct={class:"calendar-navigation"},vt={class:"nav-left"},ut={class:"current-month"},pt={class:"nav-right"},ht={class:"input-group",style:{height:"51px",width:"180px"}},mt=["value"],yt={class:"custom-calendar"},gt={class:"calendar-grid"},ft={class:"day-number"},wt=["onClick","onMouseenter"],_t={key:0,class:"detail-card"},bt={class:"detail-header"},Ct=["src"],Dt={class:"detail-name"},kt={class:"detail-list"},Mt={class:"modal-card",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title"},xt={id:"modal-title",class:"modal-title"},St={__name:"Calander",props:{availabilities:Array,coachs:Array},setup(B){const g=B,m=y(null),x=y(""),c=y(new Date),o=y(null),w=y(!1),I=()=>{w.value=!0,document.body.style.overflow="hidden"},_=()=>{w.value=!1,document.body.style.overflow=""},S=a=>{a.key==="Escape"&&_()};tt(()=>window.addEventListener("keydown",S)),et(()=>window.removeEventListener("keydown",S));const $=h(()=>c.value.toLocaleDateString("fr-FR",{month:"long",year:"numeric"})),V=h(()=>[...new Set((g.coachs||[]).map(a=>a.specialty).filter(Boolean))]),E=h(()=>m.value?(g.coachs||[]).filter(a=>a.specialty===m.value):[]),L=h(()=>{if(!m.value)return[];const a=E.value.map(t=>t.coach_id);return(g.availabilities||[]).filter(t=>a.includes(t.coach_id)&&t.statut==="available")}),N=h(()=>{const a=new Map;return(L.value||[]).forEach(t=>{if(!(t!=null&&t.date))return;const s=t.date;a.set(s,a.get(s)||!1||t.statut==="available")}),a}),j=h(()=>{const a=new Date(c.value);a.setDate(1);const t=new Date(a),s=a.getMonth(),v=(t.getDay()+6)%7,u=new Date(t);u.setDate(1-v);const r=[];for(let C=0;C<42;C++){const p=new Date(u);p.setDate(u.getDate()+C);const Z=p.getFullYear(),q=String(p.getMonth()+1).padStart(2,"0"),G=String(p.getDate()).padStart(2,"0"),D=`${Z}-${q}-${G}`;let T="current";p.getMonth()!==s&&(T=p<t?"prev":"next");const Q=(L.value||[]).filter(W=>W.date===D);r.push({key:D,label:p.getDate(),type:T,isAvailable:!!N.value.get(D),events:Q})}return r}),z=()=>{const a=new Date(c.value);a.setMonth(a.getMonth()-1),c.value=a},U=()=>{const a=new Date(c.value);a.setMonth(a.getMonth()+1),c.value=a},H=()=>{c.value=new Date},b=a=>(g.coachs||[]).find(t=>t.coach_id===a),J=a=>{var t;return((t=b(a))==null?void 0:t.name)||"Formateur"},K=(a,t)=>{const s=b(t.coach_id),n=(s==null?void 0:s.avatar)||"/assets/img/avatars/1.png",v=new Date(`${t.date}T${t.start_time}`).toLocaleDateString("fr-FR"),u=new Date(`${t.date}T${t.start_time}`).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),r=new Date(`${t.date}T${t.end_time}`).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"});a.target._tippy&&a.target._tippy.destroy(),dt(a.target,{allowHTML:!0,animation:"scale",theme:"light",interactive:!0,content:`
      <div style="padding:10px; width: 198px;">
        <div style="display:flex; align-items:center; gap:10px; margin-bottom:8px;">
          <img src="${n}" style="width:40px;height:40px;border-radius:50%;object-fit:cover;">
          <strong>${(s==null?void 0:s.name)||"Inconnu"}</strong>
        </div>
        <div>ğŸ“ ${t.title||""}</div>
        <div>ğŸ“… ${v}</div>
        <div>â° ${u} - ${r}</div>
        <div>ğŸ§‘â€ğŸ’» Formation en ligne</div>
        <div>ğŸŸ¢ ${t.statut}</div>
      </div>`})},O=(a,t)=>{const s=b(t.coach_id);o.value={coachName:(s==null?void 0:s.name)||"Formateur",coachAvatar:(s==null?void 0:s.avatar)||"/assets/img/avatars/1.png",statut:t.statut,title:t.title||"Session",date:t.date,price:t.price_per_hour||(s==null?void 0:s.price_per_hour)||20,start:t.start_time,end:t.end_time,coachId:t.coach_id,availabilityId:t.id}},P=()=>{o.value&&I()},Y=()=>{if(!o.value)return;const a=new URLSearchParams({coach_id:o.value.coachId,availability_id:o.value.availabilityId}).toString();window.location.href=`/startup/res/create?${a}`};return(a,t)=>{var s;return l(),d("div",rt,[e("div",ct,[e("div",vt,[e("button",{class:"nav-arrow",onClick:z},"â€¹"),e("span",ut,i($.value.charAt(0).toUpperCase()+$.value.slice(1)),1),e("button",{class:"nav-arrow",onClick:U},"â€º"),e("button",{class:"today-btn",onClick:H},"Aujourd'hui")]),e("div",pt,[e("div",ht,[t[2]||(t[2]=e("span",{class:"input-group-text"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"19",height:"19",viewBox:"0 0 19 19",fill:"none"},[e("path",{d:"M17.8749 18L12.4244 12.3333M1.52344 7.61111C1.52344 8.47929 1.68792 9.33898 2.00748 10.1411C2.32705 10.9432 2.79544 11.672 3.38592 12.2859C3.9764 12.8998 4.6774 13.3867 5.4489 13.719C6.22039 14.0512 7.04728 14.2222 7.88234 14.2222C8.71741 14.2222 9.54429 14.0512 10.3158 13.719C11.0873 13.3867 11.7883 12.8998 12.3788 12.2859C12.9692 11.672 13.4376 10.9432 13.7572 10.1411C14.0768 9.33898 14.2412 8.47929 14.2412 7.61111C14.2412 6.74293 14.0768 5.88325 13.7572 5.08115C13.4376 4.27905 12.9692 3.55025 12.3788 2.93635C11.7883 2.32245 11.0873 1.83548 10.3158 1.50324C9.54429 1.171 8.71741 1 7.88234 1C7.04728 1 6.22039 1.171 5.4489 1.50324C4.6774 1.83548 3.9764 2.32245 3.38592 2.93635C2.79544 3.55025 2.32705 4.27905 2.00748 5.08115C1.68792 5.88325 1.52344 6.74293 1.52344 7.61111Z",stroke:"#C6C6C6","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),F(e("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>x.value=n),type:"text",class:"form-control",placeholder:"Rechercher"},null,512),[[st,x.value]])]),F(e("select",{id:"specialtySelect","onUpdate:modelValue":t[1]||(t[1]=n=>m.value=n),class:"form-select",style:{width:"180px"}},[t[3]||(t[3]=e("option",{value:null,disabled:""},"Domaine",-1)),(l(!0),d(k,null,M(V.value,n=>(l(),d("option",{key:n,value:n},i(n),9,mt))),128))],512),[[nt,m.value]])])]),e("div",{class:A(["layout",{"has-detail":!!o.value}])},[e("div",yt,[t[4]||(t[4]=ot('<div class="calendar-header" data-v-7c98506d><div class="day-header" data-v-7c98506d>Lundi</div><div class="day-header" data-v-7c98506d>Mardi</div><div class="day-header" data-v-7c98506d>Mercredi</div><div class="day-header" data-v-7c98506d>Jeudi</div><div class="day-header" data-v-7c98506d>Vendredi</div><div class="day-header" data-v-7c98506d>Samedi</div><div class="day-header" data-v-7c98506d>Dimanche</div></div>',1)),e("div",gt,[(l(!0),d(k,null,M(j.value,n=>(l(),d("div",{key:n.key,class:A(["calendar-day",n.type==="prev"?"prev-month":"",n.type==="next"?"next-month":"",n.isAvailable?"has-availability":""])},[e("span",ft,i(n.label),1),(l(!0),d(k,null,M(n.events,(v,u)=>(l(),d("div",{key:`${n.key}-${u}`,class:"event-container"},[e("div",{class:"event-item",onClick:r=>O(r,v),onMouseenter:r=>K(r,v)},i(J(v.coach_id))+"... ",41,wt)]))),128))],2))),128))])]),o.value?(l(),d("aside",_t,[t[10]||(t[10]=e("h4",{class:"detail-title"},"DÃ©tail de la disponibilitÃ©",-1)),e("div",bt,[e("img",{src:o.value.coachAvatar,alt:"avatar",class:"detail-avatar"},null,8,Ct),e("div",null,[e("div",Dt,i(o.value.coachName),1),t[5]||(t[5]=e("div",{class:"detail-status available"},"Disponible",-1))])]),e("ul",kt,[e("li",null,[t[6]||(t[6]=e("span",{class:"icon"},"ğŸ“",-1)),f(" "+i(o.value.title),1)]),e("li",null,[t[7]||(t[7]=e("span",{class:"icon"},"ğŸ“…",-1)),f(" "+i(new Date(o.value.date).toLocaleDateString("fr-FR")),1)]),e("li",null,[t[8]||(t[8]=e("span",{class:"icon"},"ğŸ·ï¸",-1)),f(" Lâ€™heure Ã  "+i(o.value.price)+"â‚¬",1)]),e("li",null,[t[9]||(t[9]=e("span",{class:"icon"},"â°",-1)),f(" Du "+i(o.value.start)+" au "+i(o.value.end),1)])]),e("button",{class:"reserve-btn",onClick:P},"RÃ©server une rÃ©union")])):R("",!0)],2),(l(),at(lt,{to:"body"},[w.value?(l(),d("div",{key:0,class:"modal-overlay",onClick:it(_,["self"])},[e("div",Mt,[t[11]||(t[11]=e("div",{class:"modal-icon","aria-hidden":"true"},[e("svg",{viewBox:"0 0 24 24",width:"52",height:"52",fill:"currentColor"},[e("path",{d:"M3 5h18a2 2 0 0 1 2 2v2H1V7a2 2 0 0 1 2-2zm-2 6h22v6a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-6zm5 5h6v-2H6v2z"})])],-1)),e("h3",xt," Voulez-vous rÃ©server une rÃ©union avec Â« "+i((s=o.value)==null?void 0:s.coachName)+" Â» ? ",1),e("div",{class:"modal-actions"},[e("button",{class:"btn btn-primary",onClick:Y},"RÃ©server et payer via Stripe"),e("button",{class:"btn btn-secondary",onClick:_},"Annuler")])])])):R("",!0)]))])}}},Ft=X(St,[["__scopeId","data-v-7c98506d"]]);export{Ft as default};
