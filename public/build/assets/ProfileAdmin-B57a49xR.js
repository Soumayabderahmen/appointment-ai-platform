import{_ as E,r as f,y as L,a as c,o as p,b as t,f as u,j as v,t as d,i as G,w as x,v as h,g as B,h as I,l as k}from"./app-xZFo10Vc.js";const q={class:"bg-[#eaf6ff] min-h-screen py-10 px-4",style:{"margin-left":"-10px","margin-right":"0px"}},O={class:"w-full h-64",style:{height:"208px"}},T=["src"],J={class:"max-w-6xl mx-auto flex justify-between items-start px-6 py-6 bg-[#eaf6ff]"},Z={class:"flex items-center space-x-6",style:{"margin-top":"-73px"}},H=["src"],K={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50"},Q={class:"relative bg-white rounded-lg overflow-hidden shadow-lg max-w-xl"},W=["src"],X={class:"text-2xl font-bold text-[#003366]"},Y={style:{color:"rgb(0, 147, 238)","font-size":"15px","font-family":"Poppins"}},ee={class:"text-sm text-gray-700 flex items-center"},te={class:"max-w-5xl mx-auto bg-white p-6 mt-6 rounded-xl shadow"},se={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},oe={key:0,class:"text-red-600 text-sm mt-1"},ae={key:0,class:"text-red-600 text-sm mt-1"},le={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},re={key:0,class:"text-red-600 text-sm mt-1"},ie={class:"w-full"},ne={key:0,class:"mt-2 text-sm text-gray-600"},de={class:"w-full"},me={key:0,class:"mt-2 text-sm text-gray-600"},ce={__name:"ProfileAdmin",props:{user:Object,mustVerifyEmail:Boolean,status:String,role:String},setup(R){var j,A,C,P,M,V,$,z;const r=R,g=f(structuredClone(r.user)),s=L({nom:((j=r.user)==null?void 0:j.name)||"",email:((A=r.user)==null?void 0:A.email)||"",phone:((C=r.user)==null?void 0:C.phone_number)||"",adresse:((M=(P=r.user)==null?void 0:P.admin)==null?void 0:M.adresse)||"",profile_image:null,cover_image:null}),l=L({nom:"",email:"",phone:""}),N=()=>{let a=!0;l.nom="",l.email="",l.phone="",/^([A-ZÃ€Ã‚Ã„Ã‰ÃˆÃŠÃ‹ÃŽÃÃ”Ã–Ã™Ã›ÃœÅ¸Ã‡][a-zÃ Ã¢Ã¤Ã©Ã¨ÃªÃ«Ã®Ã¯Ã´Ã¶Ã¹Ã»Ã¼Ã¿Ã§']+)(\s[A-ZÃ€Ã‚Ã„Ã‰ÃˆÃŠÃ‹ÃŽÃÃ”Ã–Ã™Ã›ÃœÅ¸Ã‡][a-zÃ Ã¢Ã¤Ã©Ã¨ÃªÃ«Ã®Ã¯Ã´Ã¶Ã¹Ã»Ã¼Ã¿Ã§']+)*$/.test(s.nom.trim())||(l.nom="Chaque mot du nom doit commencer par une majuscule.",a=!1);const m=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;(!s.email||!m.test(s.email))&&(l.email='Adresse email invalide (doit contenir "@" et Ãªtre bien formatÃ©e).',a=!1);const o=s.phone.replace(/\s+/g,"");return/^\+?[0-9]{8,12}$/.test(o)||(l.phone='Le numÃ©ro doit contenir entre 8 et 12 chiffres (avec "+" optionnel).',a=!1),a},b=f((V=r.user.admin)!=null&&V.profile_image?`/storage/${($=r.user.admin)==null?void 0:$.profile_image}`:"/assets/img/profile/default-avatar.jpg"),w=f((z=r.user.admin)!=null&&z.cover_image?`/storage/${r.user.admin.cover_image}`:"/assets/img/profile/banner.jpg"),S=a=>{const e=a.target.files[0];s.profile_image=e,e&&(b.value=URL.createObjectURL(e))},F=a=>{const e=a.target.files[0];s.cover_image=e,e&&(w.value=URL.createObjectURL(e))},y=f(!1),D=async()=>{var a,e,m,o,_;if(!N()){k.error("Veuillez corriger les erreurs dans le formulaire.");return}try{const i=new FormData;i.append("adresse",s.adresse||""),i.append("email",s.email||""),i.append("name",s.nom||""),i.append("phone_number",s.phone||""),s.profile_image instanceof File&&i.append("profile_image",s.profile_image),s.cover_image instanceof File&&i.append("cover_image",s.cover_image);const U=await I.post(`/api/admin/profile/${r.user.id}`,i,{headers:{"Content-Type":"multipart/form-data"}}),n=U.data.user;g.value=structuredClone(n),s.nom=n.name,s.email=n.email,s.phone=n.phone_number||"",s.adresse=((a=n.admin)==null?void 0:a.adresse)||"",b.value=(e=n.admin)!=null&&e.profile_image?`/storage/${n.admin.profile_image}`:"/assets/img/profile/default-avatar.jpg",w.value=(m=n.admin)!=null&&m.cover_image?`/storage/${n.admin.cover_image}`:"/assets/img/profile/banner.jpg",k.success(U.data.message||"Profil mis Ã  jour avec succÃ¨s")}catch(i){console.error(i),k.error(((_=(o=i.response)==null?void 0:o.data)==null?void 0:_.message)||"Erreur lors de la mise Ã  jour")}};return(a,e)=>{var m;return p(),c("div",q,[t("div",O,[t("img",{src:w.value,class:"w-full h-full object-cover",alt:"banner"},null,8,T),t("button",{onClick:e[0]||(e[0]=o=>a.$refs.coverInput.click()),class:"absolute top-4 right-6 bg-white bg-opacity-80 p-2 rounded-full shadow-md hover:bg-opacity-100 transition",title:"Modifier la banniÃ¨re"},e[7]||(e[7]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-[#003366]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536M9 11l3.536-3.536M5 19h2l9.536-9.536"})],-1)]))]),t("div",J,[t("div",Z,[t("img",{src:b.value,class:"w-[174px] h-[169px] rounded-xl shadow object-cover",alt:"avatar",style:{height:"177px",width:"171px"}},null,8,H),t("div",{style:{"margin-left":"17px"},onClick:e[2]||(e[2]=o=>y.value=!0)},[y.value?(p(),c("div",K,[t("div",Q,[t("button",{onClick:e[1]||(e[1]=o=>y.value=!1),class:"absolute top-2 right-2 text-gray-600 hover:text-red-600 text-2xl font-bold"}," Ã— "),t("img",{src:b.value,alt:"image agrandie",class:"w-full max-h-[80vh] object-contain"},null,8,W)])])):u("",!0),t("h1",X,[v(d(g.value.name)+" ",1),t("strong",Y," ("+d(g.value.role.charAt(0).toUpperCase()+g.value.role.slice(1).toLowerCase())+")",1)]),t("b",ee,d((m=g.value.admin)==null?void 0:m.adresse),1),e[8]||(e[8]=t("p",{class:"text-sm text-gray-700 flex items-center"},[v(" 500 points "),t("img",{src:"/assets/img/profile/badge.png",alt:"badge",class:"ml-2 w-6 h-6"}),t("img",{src:"/assets/img/profile/badge.png",alt:"badge",class:"ml-2 w-6 h-6"}),t("img",{src:"/assets/img/profile/badge.png",alt:"badge",class:"ml-2 w-6 h-6"})],-1))])]),e[9]||(e[9]=t("div",{class:"space-x-2 mt-6"},[t("button",{class:"border border-blue-500 text-blue-500 px-4 py-2 rounded hover:text-white",style:{border:"1px solid #0093ee","font-size":"16px",color:"#0093ee","font-family":"Poppins","box-sizing":"border-box"}},"Supprimer")],-1))]),t("div",te,[e[17]||(e[17]=t("h3",{class:"text-lg font-bold text-[#003366] mb-4"},"Modifier Profile",-1)),t("form",{onSubmit:G(D,["prevent"]),class:"bg-[#eaf6ff] p-6 rounded-xl space-y-4"},[t("div",se,[t("div",null,[e[10]||(e[10]=t("label",{class:"block font-semibold mb-1 text-[#003366]"},[v("Nom et PrÃ©nom "),t("span",{style:{color:"brown"}},"*")],-1)),x(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>s.nom=o),class:"w-full p-2 rounded border bg-white border-gray-300",placeholder:"Ã‰crire ici..."},null,512),[[h,s.nom]]),l.nom?(p(),c("p",oe,d(l.nom),1)):u("",!0)]),t("div",null,[e[11]||(e[11]=t("label",{class:"block font-semibold mb-1 text-[#003366]"},[v("Email "),t("span",{style:{color:"brown"}},"*")],-1)),x(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>s.email=o),class:"w-full p-2 rounded border bg-white border-gray-300",placeholder:"Ã‰crire ici..."},null,512),[[h,s.email]]),l.email?(p(),c("p",ae,d(l.email),1)):u("",!0)])]),t("div",le,[t("div",null,[e[12]||(e[12]=t("label",{class:"block font-semibold mb-1 text-[#003366]"},"Adresse ",-1)),x(t("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>s.adresse=o),class:"w-full p-2 rounded border bg-white border-gray-300",placeholder:"Ã‰crire ici..."},null,512),[[h,s.adresse]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block font-semibold mb-1 text-[#003366]"},"NumÃ©ro ",-1)),x(t("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>s.phone=o),class:"w-full p-2 rounded border bg-white border-gray-300",placeholder:"Ã‰crire ici..."},null,512),[[h,s.phone]]),l.phone?(p(),c("p",re,d(l.phone),1)):u("",!0)])]),t("div",ie,[e[14]||(e[14]=B('<label class="block font-semibold mb-1 text-[#003366]" data-v-de5cebe0>Image de Profile</label><label for="profile_image" class="flex flex-col items-center justify-center cursor-pointer border-2 border-dashed border-blue-400 bg-blue-50 rounded-xl py-8 px-4 hover:bg-blue-100 transition text-center" data-v-de5cebe0><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="none" viewBox="0 0 24 24" stroke="#0068A9" stroke-width="1.5" class="mb-3" data-v-de5cebe0><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5V7.5A2.5 2.5 0 015.5 5h13A2.5 2.5 0 0121 7.5v9a2.5 2.5 0 01-2.5 2.5h-13A2.5 2.5 0 013 16.5z" data-v-de5cebe0></path><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5l5.086-5.086a1.5 1.5 0 012.122 0L14.5 15l2.293-2.293a1 1 0 011.414 0L21 16.5" data-v-de5cebe0></path><circle cx="8.5" cy="8.5" r="1.5" fill="#0068A9" data-v-de5cebe0></circle></svg><p class="text-sm text-[#003366] font-semibold" data-v-de5cebe0> Cliquez pour sÃ©lectionner une image<br data-v-de5cebe0><span class="text-xs font-normal text-gray-600" data-v-de5cebe0>(JPG, PNG, max 5MB)</span></p></label>',2)),t("input",{id:"profile_image",type:"file",name:"profile_image",class:"hidden",onChange:S},null,32),s.profile_image?(p(),c("div",ne," ðŸ“Ž "+d(s.profile_image.name),1)):u("",!0)]),t("div",de,[e[15]||(e[15]=B('<label class="block font-semibold mb-1 text-[#003366]" data-v-de5cebe0>Image de Couverture</label><label for="cover_image" class="flex flex-col items-center justify-center cursor-pointer border-2 border-dashed border-blue-400 bg-blue-50 rounded-xl py-8 px-4 hover:bg-blue-100 transition text-center" data-v-de5cebe0><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="none" viewBox="0 0 24 24" stroke="#0068A9" stroke-width="1.5" class="mb-3" data-v-de5cebe0><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5V7.5A2.5 2.5 0 015.5 5h13A2.5 2.5 0 0121 7.5v9a2.5 2.5 0 01-2.5 2.5h-13A2.5 2.5 0 013 16.5z" data-v-de5cebe0></path><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5l5.086-5.086a1.5 1.5 0 012.122 0L14.5 15l2.293-2.293a1 1 0 011.414 0L21 16.5" data-v-de5cebe0></path><circle cx="8.5" cy="8.5" r="1.5" fill="#0068A9" data-v-de5cebe0></circle></svg><p class="text-sm text-[#003366] font-semibold" data-v-de5cebe0> Cliquez pour sÃ©lectionner une image<br data-v-de5cebe0><span class="text-xs font-normal text-gray-600" data-v-de5cebe0>(JPG, PNG, max 5MB)</span></p></label>',2)),t("input",{id:"cover_image",type:"file",name:"cover_image",class:"hidden",onChange:F},null,32),s.cover_image?(p(),c("div",me," ðŸ“Ž "+d(s.cover_image.name),1)):u("",!0)]),e[16]||(e[16]=t("div",{class:"text-right"},[t("button",{type:"submit",class:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700"},"Sauvegarder")],-1))],32)])])}}},ue=E(ce,[["__scopeId","data-v-de5cebe0"]]);export{ue as default};
