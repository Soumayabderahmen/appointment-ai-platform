import{r as T,c as V,D as h,a as m,o as p,b as e,i as N,w as r,v as i,j as c,d as j,F as M,e as R,t as U,h as C,l as f}from"./app-xZFo10Vc.js";const F={class:"mt-3 formulaire"},k={class:"col-12"},A={class:"card card-1"},D={class:"card-body px-lg-4 px-md-3 px-2"},$={class:"bs-stepper wizard-numbered shadow-none mt-2"},B={class:"form-group"},E={class:"form-group"},O={class:"form-group"},q=["value"],z={class:"form-group"},H={class:"form-group"},I={class:"form-group"},L={__name:"ReservationCoach",props:{coach:Object,availability:Object,slots:Array,honoraire:Number,date:String,startup_id:Number},setup(g){var v,b;const n=g,s=T({coach:((b=(v=n.coach)==null?void 0:v.user)==null?void 0:b.name)||"",availability_id:n.availability.id,startup_id:n.startup_id,message:"",selected_time:"",duration:30,honoraire:n.honoraire,total:0}),u=l=>{const[t,o]=l.split(":").map(Number);return t*60+o},y=l=>{const t=Math.floor(l/60).toString().padStart(2,"0"),o=(l%60).toString().padStart(2,"0");return`${t}:${o}`},x=V(()=>{const l=parseInt(s.value.duration),t=n.slots,o=[];for(let a=0;a<t.length;a++){const w=u(t[a]),d=y(w+l);u(d)<=u(t[t.length-1])+30&&o.push({start:t[a],end:d,label:`${t[a]} - ${d}`})}return o});h(()=>s.value.duration,l=>{const t=parseFloat(s.value.honoraire);s.value.total=(t*l/60).toFixed(2)});const S=async()=>{try{const l=await C.post("/api/startup/reservation",s.value,{headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),Accept:"application/json"}});f.success("Réservation envoyée avec succès"),l.data.redirect&&(window.location.href=l.data.redirect)}catch(l){console.error("Erreur:",l),f.error("Réservation échouée, veuillez réessayer")}};return(l,t)=>(p(),m("div",F,[e("div",k,[e("div",A,[e("div",D,[e("div",$,[e("form",{onSubmit:N(S,["prevent"])},[e("div",B,[t[6]||(t[6]=e("label",null,"Nom du Coach",-1)),r(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>s.value.coach=o),class:"form-control",disabled:""},null,512),[[i,s.value.coach]])]),t[13]||(t[13]=e("br",null,null,-1)),e("div",E,[t[7]||(t[7]=e("label",null,[c("Durée de la réunion (minutes)"),e("strong",{style:{color:"brown"}},"*")],-1)),r(e("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=o=>s.value.duration=o),class:"form-control",min:"15",step:"15"},null,512),[[i,s.value.duration]])]),t[14]||(t[14]=e("br",null,null,-1)),e("div",O,[t[9]||(t[9]=e("label",null,[c("Choisir une heure "),e("strong",{style:{color:"brown"}},"*")],-1)),r(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.value.selected_time=o),class:"form-control",required:""},[t[8]||(t[8]=e("option",{disabled:"",value:""},"Sélectionner une heure",-1)),(p(!0),m(M,null,R(x.value,o=>(p(),m("option",{key:o.start,value:o.start},U(o.label),9,q))),128))],512),[[j,s.value.selected_time]])]),t[15]||(t[15]=e("br",null,null,-1)),e("div",z,[t[10]||(t[10]=e("label",null,"Honoraire par heure (€)",-1)),r(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=o=>s.value.honoraire=o),class:"form-control",disabled:""},null,512),[[i,s.value.honoraire]])]),t[16]||(t[16]=e("br",null,null,-1)),e("div",H,[t[11]||(t[11]=e("label",null,"Total (€)",-1)),r(e("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=o=>s.value.total=o),class:"form-control",disabled:""},null,512),[[i,s.value.total]])]),t[17]||(t[17]=e("br",null,null,-1)),e("div",I,[t[12]||(t[12]=e("label",null,"Message",-1)),r(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.value.message=o),class:"form-control",placeholder:"Ajouter un message"},null,512),[[i,s.value.message]])]),t[18]||(t[18]=e("br",null,null,-1)),t[19]||(t[19]=e("button",{type:"submit",class:"btn btn-primary mt-3"},"Réserver",-1))],32)])])])])]))}};export{L as default};
